!function(){function e(){return!!(navigator.getUserMedia||navigator.webkitGetUserMedia||navigator.mozGetUserMedia||navigator.msGetUserMedia)}angular.module("View",[]).controller("ViewController",["$scope","$http","$location",function(e,t,n){function o(){for(var t=0;t<e.comments.length;t++)if(Math.floor(this.currentTime)==e.comments[t].time){this.pause();for(var n=t;e.comments[n].time==Math.floor(this.currentTime);n++)alert(e.comments[t].comment);this.currentTime+=1.1}}e.comments=[];var i=document.getElementById("main"),a=document.getElementById("popup");this.val=1,i.addEventListener("timeupdate",o),this.postReq=function(e,n,o){t.post(e,n).then(function(e){return o(e.data)})},this.getComments=function(){var t=this;t.postReq(n.url(),{},function(t){e.comments=t.slice()})},e.postComment=function(){var o=document.getElementById("comment").value,a=i.currentTime;q=t.post(n.url(),{comment:o,time:a}).then(function(t){e.comments=t.data,document.getElementById("comment").value=""})},e.skipTo=function(e){i.currentTime=e},e.popUp=function(){1==this.val?(this.val=0,a.innerHTML="Enable Popups",i.addEventListener("timeupdate",o)):(this.val=1,a.innerHTML="Disable Popups",i.addEventListener("timeupdate",o))},this.getComments()}]).config(["$httpProvider",function(e){e.defaults.xsrfCookieName="csrftoken",e.defaults.xsrfHeaderName="X-CSRFToken"}]),e()||alert("getUserMedia() is not supported in your browser");navigator.getUserMedia=navigator.getUserMedia||navigator.webkitGetUserMedia||navigator.mozGetUserMedia,navigator.getUserMedia?navigator.getUserMedia({audio:!0,video:{width:1280,height:720}},function(e){var t=document.getElementById("webcam");t.srcObject=e,t.onloadedmetadata=function(e){t.play()}},function(e){console.log("The following error occurred: "+e.name)}):console.log("getUserMedia not supported")}();